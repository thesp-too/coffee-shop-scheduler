<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>ç™¾åˆ†ä¹‹ä¸€å‘˜å·¥æ’ç­ç³»ç»Ÿ</title>
    <style>
        /* éšè—å‘˜å·¥åˆ—è¡¨ä¾§è¾¹æ  */
        .sidebar { display: none !important; }
        .main-content { margin-right: 0 !important; }
        
        /* ç§»åŠ¨ç«¯èœå•æŒ‰é’® */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0.2rem 0.5rem;
            line-height: 1;
        }
        
        .header-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* ç§»åŠ¨ç«¯æ ·å¼ */
        @media (max-width: 768px) {
            .mobile-menu-btn { display: block !important; }
            .header { padding: 0.8rem 1rem !important; }
            .header h1 { font-size: 1.2rem !important; margin-bottom: 0 !important; }
            .main-content { padding: 0.3rem !important; }
            
            /* é»˜è®¤éšè—å¯¼èˆª */
            .nav-tabs {
                display: none !important;
                flex-direction: column !important;
                gap: 0 !important;
                margin-top: 0.8rem !important;
                background: rgba(255,255,255,0.1);
                border-radius: 8px;
                overflow: hidden;
            }
            
            /* æ˜¾ç¤ºèœå•æ—¶ */
            .nav-tabs.show {
                display: flex !important;
            }
            
            .nav-tab {
                width: 100% !important;
                text-align: left !important;
                border-radius: 0 !important;
                padding: 0.8rem 1rem !important;
                background: rgba(255,255,255,0.1) !important;
            }
            
            .nav-tab.active {
                background: rgba(255,255,255,0.3) !important;
            }
            
            /* ç§»åŠ¨ç«¯é‡ç½®æŒ‰é’®ä¼˜åŒ– */
            #resetDataBtn {
                width: 100%;
                margin-top: 0.5rem;
            }
        }
    </style>
    <link rel="stylesheet" href="css/styles.css?v=3">
    <link rel="stylesheet" href="css/calendar.css?v=3">
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <div class="header-title">
                <h1>â˜• ç™¾åˆ†ä¹‹ä¸€æ’ç­ç³»ç»Ÿ</h1>
                <button class="mobile-menu-btn" id="mobileMenuBtn">â˜°</button>
            </div>
            <nav class="nav-tabs" id="navTabs">
                <button class="nav-tab active" data-tab="schedule">æ’ç­æ—¥å†</button>
                <button class="nav-tab" data-tab="employees">å‘˜å·¥ç®¡ç†</button>
                <button class="nav-tab" data-tab="shifts">ç­æ¬¡è®¾ç½®</button>
                <button class="nav-tab" data-tab="stores">åˆ†åº—ç®¡ç†</button>
            </nav>
        </header>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <!-- æ’ç­æ—¥å†è§†å›¾ -->
            <section id="schedule-view" class="view active">
                <div class="calendar-controls">
                    <div class="store-selector-wrapper">
                        <label for="storeSelector">é€‰æ‹©åˆ†åº—:</label>
                        <select id="storeSelector" class="store-selector">
                            <!-- åˆ†åº—åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </select>
                    </div>
                    <button class="btn btn-secondary" id="prevWeek">â† ä¸Šä¸€å‘¨</button>
                    <span class="current-week" id="currentWeek"></span>
                    <button class="btn btn-secondary" id="nextWeek">ä¸‹ä¸€å‘¨ â†’</button>
                    <button class="btn btn-primary" id="todayBtn">ä»Šå¤©</button>
                    <button class="btn btn-success" id="generateScheduleBtn">ğŸ“Š ç”Ÿæˆæ’ç­è¡¨</button>
                    <button class="btn btn-danger" id="resetDataBtn">ğŸ”„ é‡ç½®æ•°æ®</button>
                    <button class="btn btn-warning" id="initDataBtn" style="display: none;">ğŸ”„ åˆå§‹åŒ–æ•°æ®</button>
                </div>
                <div class="calendar-container">
                    <div class="calendar-header">
                        <div class="day-header">å‘¨ä¸€</div>
                        <div class="day-header">å‘¨äºŒ</div>
                        <div class="day-header">å‘¨ä¸‰</div>
                        <div class="day-header">å‘¨å››</div>
                        <div class="day-header">å‘¨äº”</div>
                        <div class="day-header">å‘¨å…­</div>
                        <div class="day-header">å‘¨æ—¥</div>
                    </div>
                    <div class="calendar-body" id="calendarBody">
                        <!-- æ—¥å†å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </section>

            <!-- å‘˜å·¥ç®¡ç†è§†å›¾ -->
            <section id="employees-view" class="view">
                <div class="section-header">
                    <h2>å‘˜å·¥ç®¡ç†</h2>
                    <button class="btn btn-primary" id="addEmployeeBtn">+ æ·»åŠ å‘˜å·¥</button>
                </div>
                <div class="employee-list" id="employeeList">
                    <!-- å‘˜å·¥åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>

            <!-- ç­æ¬¡è®¾ç½®è§†å›¾ -->
            <section id="shifts-view" class="view">
                <div class="section-header">
                    <h2>ç­æ¬¡è®¾ç½®</h2>
                    <button class="btn btn-primary" id="addShiftBtn">+ æ·»åŠ ç­æ¬¡</button>
                </div>
                <div class="shift-list" id="shiftList">
                    <!-- ç­æ¬¡åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>

            <!-- åˆ†åº—ç®¡ç†è§†å›¾ -->
            <section id="stores-view" class="view">
                <div class="section-header">
                    <h2>åˆ†åº—ç®¡ç†</h2>
                    <button class="btn btn-primary" id="addStoreBtn">+ æ·»åŠ åˆ†åº—</button>
                </div>
                <div class="store-list" id="storeList">
                    <!-- åˆ†åº—åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>
        </main>

        <!-- ä¾§è¾¹æ  - å‘˜å·¥å¿«é€Ÿé€‰æ‹© -->
        <aside class="sidebar">
            <h3>å‘˜å·¥åˆ—è¡¨</h3>
            <div class="employee-quick-list" id="employeeQuickList">
                <!-- å¿«é€Ÿå‘˜å·¥åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="sidebar-actions">
                <button class="btn btn-secondary" id="exportBtn">ğŸ“¥ å¯¼å‡ºæ•°æ®</button>
                <button class="btn btn-secondary" id="importBtn">ğŸ“¤ å¯¼å…¥æ•°æ®</button>
                <button class="btn btn-danger" id="resetBtn">ğŸ”„ é‡ç½®æ•°æ®</button>
                <input type="file" id="importFile" accept=".json" style="display: none;">
            </div>
        </aside>
    </div>

    <!-- æ¨¡æ€æ¡† - æ·»åŠ /ç¼–è¾‘å‘˜å·¥ -->
    <div class="modal" id="employeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="employeeModalTitle">æ·»åŠ å‘˜å·¥</h3>
                <button class="close-btn" data-close="employeeModal">&times;</button>
            </div>
            <form id="employeeForm">
                <input type="hidden" id="employeeId">
                <div class="form-group">
                    <label for="employeeName">å§“å *</label>
                    <input type="text" id="employeeName" required>
                </div>
                <div class="form-group">
                    <label for="employeePosition">èŒä½ *</label>
                    <select id="employeePosition" required>
                        <option value="">è¯·é€‰æ‹©èŒä½</option>
                        <option value="åº—é•¿">åº—é•¿</option>
                        <option value="å‰¯åº—é•¿">å‰¯åº—é•¿</option>
                        <option value="å’–å•¡å¸ˆ">å’–å•¡å¸ˆ</option>
                        <option value="æ”¶é“¶å‘˜">æ”¶é“¶å‘˜</option>
                        <option value="æœåŠ¡å‘˜">æœåŠ¡å‘˜</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="employeePhone">è”ç³»ç”µè¯</label>
                    <input type="tel" id="employeePhone" placeholder="13800138000">
                </div>
                <div class="form-group">
                    <label for="employeeEmail">é‚®ç®±</label>
                    <input type="email" id="employeeEmail" placeholder="example@email.com">
                </div>
                <div class="form-group">
                    <label for="employeeColor">æ˜¾ç¤ºé¢œè‰²</label>
                    <input type="color" id="employeeColor" value="#3498db">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-close="employeeModal">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† - æ·»åŠ /ç¼–è¾‘ç­æ¬¡ -->
    <div class="modal" id="shiftModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="shiftModalTitle">æ·»åŠ ç­æ¬¡</h3>
                <button class="close-btn" data-close="shiftModal">&times;</button>
            </div>
            <form id="shiftForm">
                <input type="hidden" id="shiftId">
                <div class="form-group">
                    <label for="shiftName">ç­æ¬¡åç§° *</label>
                    <input type="text" id="shiftName" required placeholder="ä¾‹å¦‚ï¼šæ—©ç­">
                </div>
                <div class="form-group">
                    <label for="shiftStartTime">å¼€å§‹æ—¶é—´ *</label>
                    <input type="time" id="shiftStartTime" required>
                </div>
                <div class="form-group">
                    <label for="shiftEndTime">ç»“æŸæ—¶é—´ *</label>
                    <input type="time" id="shiftEndTime" required>
                </div>
                <div class="form-group">
                    <label for="shiftColor">æ˜¾ç¤ºé¢œè‰²</label>
                    <input type="color" id="shiftColor" value="#2ecc71">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-close="shiftModal">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† - åˆ†é…ç­æ¬¡ -->
    <div class="modal" id="assignModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>åˆ†é…ç­æ¬¡</h3>
                <button class="close-btn" data-close="assignModal">&times;</button>
            </div>
            <form id="assignForm">
                <div class="form-group">
                    <label for="assignDate">æ—¥æœŸ *</label>
                    <input type="date" id="assignDate" name="assignDate" required>
                </div>
                <div class="form-group">
                    <label for="assignShift">é€‰æ‹©ç­æ¬¡ *</label>
                    <select id="assignShift" name="assignShift" required>
                        <option value="">è¯·é€‰æ‹©ç­æ¬¡</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="assignStore">é€‰æ‹©åˆ†åº— *</label>
                    <select id="assignStore" name="assignStore" required>
                        <option value="">è¯·é€‰æ‹©åˆ†åº—</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="assignEmployee">é€‰æ‹©å‘˜å·¥ *</label>
                    <select id="assignEmployee" name="assignEmployee" required>
                        <option value="">è¯·é€‰æ‹©å‘˜å·¥</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-close="assignModal">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">åˆ†é…</button>
                </div>
            </form>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† - æ·»åŠ /ç¼–è¾‘åˆ†åº— -->
    <div class="modal" id="storeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="storeModalTitle">æ·»åŠ åˆ†åº—</h3>
                <button class="close-btn" data-close="storeModal">&times;</button>
            </div>
            <form id="storeForm">
                <input type="hidden" id="storeId">
                <div class="form-group">
                    <label for="storeName">åˆ†åº—åç§° *</label>
                    <input type="text" id="storeName" required placeholder="ä¾‹å¦‚ï¼šæœé˜³åº—">
                </div>
                <div class="form-group">
                    <label for="storeAddress">åœ°å€</label>
                    <input type="text" id="storeAddress" placeholder="ä¾‹å¦‚ï¼šæœé˜³åŒºå»ºå›½è·¯88å·">
                </div>
                <div class="form-group">
                    <label for="storePhone">è”ç³»ç”µè¯</label>
                    <input type="tel" id="storePhone" placeholder="010-12345678">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-close="storeModal">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† - æŸ¥çœ‹å½“æ—¥æ’ç­ -->
    <div class="modal" id="dayScheduleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>å½“æ—¥æ’ç­è¯¦æƒ…</h3>
                <button class="close-btn" data-close="dayScheduleModal">&times;</button>
            </div>
            <div class="day-schedule-content" id="dayScheduleContent">
                <!-- å½“æ—¥æ’ç­è¯¦æƒ…å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" data-close="dayScheduleModal">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- è„šæœ¬ -->
    <script src="js/storage.js"></script>
    <script src="js/store.js"></script>
    <script src="js/employee.js"></script>
    <script src="js/shift.js"></script>
    <script src="js/weather.js"></script>
    <script src="js/schedule.js"></script>
    <script src="js/scheduleImage.js"></script>
    <script src="js/app.js"></script>
    
    <!-- ç§»åŠ¨ç«¯èœå•åŠŸèƒ½ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navTabs = document.getElementById('navTabs');
            
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', function() {
                    navTabs.classList.toggle('show');
                });
                
                // ç‚¹å‡»å¯¼èˆªé¡¹åè‡ªåŠ¨å…³é—­èœå•
                const navButtons = navTabs.querySelectorAll('.nav-tab');
                navButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        if (window.innerWidth <= 768) {
                            navTabs.classList.remove('show');
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>
